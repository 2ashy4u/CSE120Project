{% extends "base.html" %} {% block title %}Manager{% endblock %} {%block
navbar%}
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="/Home">
    <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Western_Digital_brand_mark.svg" width="50" height="25" class="d-inline-block align-top">
    Western Digital
  </a>
  <button
    class="navbar-toggler"
    type="button"
    data-toggler="collapse"
    data-target="#navbar"
  >
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbar">
    <!-- Navbar Buttons -->
    <div class="navbar-nav">
      <!-- Add icons -->
      {% if user.is_authenticated %} {% if user.isManager == 'Y' %}
      <a class="nav-iten nav-link" id="manager" href="/Manager">Manager View</a>
      {% endif %}
      <a class="nav-iten nav-link" id="home" href="/Home">Home</a>
      {% if user.isManager == 'Y' %}
      <a class="nav-iten nav-link" id="quiz" href="/Employees">Employees</a>
      <a class="nav-iten nav-link" id="add_quiz" href="/AddCourses"
        >Add Courses</a
      >
      {% endif %}
      <a class="nav-item nav-link" id="logout" href="/logout">Logout</a>
      {% else %}
      <a class="nav-iten nav-link" id="login" href="/Login">Login</a>
      {% endif %}
    </div>
  </div>
</nav>
{%endblock%} {% block content %}
<!-- If/else statement is a placeholder -->
{% if user.isManager == "N" %}
<h1>You don't have access to this page.</h1>
{% else %}

</head>
<body>
    <h1 class="welcomeHeader">Welcome {{current_user.firstname}}!</h1>
    <div class="dropdown">
        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Sort By
        <ul class="dropdown-menu">
          <li><a href="#">Completed</a></li>
          <li><a href="#">Incompleted</a></li>
        </ul>
    </div>
    <div class="courses-box">
      <form action="" method="POST">
        <table class="table align-middle mb-0 bg-white">
          <thead class="bg-light">
              <tr>
                  <th>Courses</th>
                  <th>Action</th>
              </tr>
          </thead>
          <tbody>
            {% for course in user.courses %}
            <tr>
              <td>
                <ul>
                  <p>{{ course.courseTitle }}</p>
                  {% for n_user in user.employees %}
                    <ul>
                      <li class = "list-group-item"><a href="/Feedback/e_id={{n_user.id}},c_id={{course.idcourses}}">{{_employee_course.query.filter_by(employee_id = n_user.id, course_id = course.idcourses).first().employee_id}} </li>
                    </ul>
                  </ul>      
                  {% endfor %}
              </td>
              <td>
                <a href="/UpdateCourse/m_id={{user.id}},c_id={{course.idcourses}}" class="btn btn-warning btn-xs">Edit</a>
                <a href="" class="btn btn-danger btn-xs" onclick="return confirm('Are you sure to delete?')">Delete</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </form>
    </div>

    <div class="piechartDiv">
      <div id="piechart"></div>
      <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
      <script type="text/javascript">

      // Load google charts
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      // Draw the chart and set the chart values
      function drawChart() {
      var data = google.visualization.arrayToDataTable([
      ['Task', 'Hours per Day'],
      ['Work', 8],
      ['Eat', 2],
      ['TV', 4],
      ['Gym', 2],
      ['Sleep', 8]
      ]);

      // Optional; add a title and set the width and height of the chart
      var options = {'title':'My Average Day', 'width':550, 'height':400};

      // Display the chart inside the <div> element with id="piechart"
      var chart = new google.visualization.PieChart(document.getElementById('piechart'));
      chart.draw(data, options);
      }
      </script>
    </div>    
</body>
{% endif %} {% endblock %}
