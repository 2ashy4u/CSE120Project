{% extends "base.html" %} {% block title %}Employees{% endblock %}{%block navbar%}
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="/Home">
    <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Western_Digital_brand_mark.svg" width="50" height="25" class="d-inline-block align-top">
    Western Digital
  </a>
  <button
    class="navbar-toggler"
    type="button"
    data-toggler="collapse"
    data-target="#navbar">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbar">
    <!-- Navbar Buttons -->
    <div class="navbar-nav">
      <!-- Add icons -->
      {% if user.is_authenticated %} {% if user.isManager == 'Y' %}
      <a class="nav-iten nav-link" id="manager" href="/Manager">Manager View</a>
      {% endif %}
      <a class="nav-iten nav-link" id="home" href="/Home">Home</a>
      {% if user.isManager == 'Y' %}
      <a class="nav-iten nav-link" id="quiz" href="/Employees">Employees</a>
      <a class="nav-iten nav-link" id="add_quiz" href="/AddCourses">Add Courses</a>
      {% endif %}
      <a class="nav-item nav-link" id="logout" href="/logout">Logout</a>
      {% else %}
      <a class="nav-iten nav-link" id="login" href="/Login">Login</a>
      {% endif %}
    </div>
  </div>
</nav>
{%endblock%}
{% block content %}

<!DOCTYPE html>
<html>
  <div class ="container-fluid">
    <form method="POST">
      <h1 align="center">Employees in {{user.department}}</h1>
      <div class="container">
        <table class="table table-hover">
          <thead>
            <tr>
              <th scope="col">EmployeeID</th>
              <th scope="col">First Name</th>
              <th scope="col">Last Name</th>
              <th scope="col">Email</th>
              <th scope="col">Manager</th>
            </tr>
            </thead>
            <tbody>
              {%for user in user.employees%}
            <tr>
              <th scope="row">{{user.id}}</th>
              <td>{{user.firstname}}</td>
              <td>{{user.lastname}}</td>
              <td>{{user.email}}</td>
              <td>{{user.manager}}</td>
              <td><a href="/Progress/e_id={{user.id}}">View Progress</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
      </div>
    </form>
  </div>

  
 
<!--employee list -->
        
<div class="piechartDiv">
  <div id="piechart"></div>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">

  // Load google charts
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart);

  // Draw the chart and set the chart values
  function drawChart() {
  var data = google.visualization.arrayToDataTable([
  ['Number of Employee', 'Progress'],
  ['Number of employee completed', {{numOfCompleted}}],
  ['Number of employee uncompleted', {{total}}-{{numOfCompleted}}]
  ]);

  // Optional; add a title and set the width and height of the chart
  var options = {'title':'Overall Courses Progress Pie Chart', 'width':800, 'height':500};

  // Display the chart inside the <div> element with id="piechart"
  var chart = new google.visualization.PieChart(document.getElementById('piechart'));
  chart.draw(data, options);
  }
  </script>
</div>    
</html>


{% endblock %}